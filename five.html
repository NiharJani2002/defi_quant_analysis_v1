<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantitative Valuation: Monad vs. MegaETH Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Inter:wght@300;400;600&display=swap');

        :root {
            --bg-canvas: #F5F2EB; /* Warm neutral background */
            --text-primary: #2C3333;
            --text-secondary: #525E5E;
            --accent-monad: #8850CA; /* Monad Color */
            --accent-mega: #2E8B57; /* MegaETH Color */
            --chart-grid: #E0DCD3;
        }

        body {
            background-color: var(--bg-canvas);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Chart Container Styling - Strict adherence to requirements */
        .chart-wrapper {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 400px; /* Base height */
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .chart-wrapper {
                height: 300px;
            }
        }

        /* Card Styling */
        .quant-card {
            background: #FFFFFF;
            border: 1px solid #E5E0D5;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02);
            transition: all 0.3s ease;
        }

        /* Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #2C3333;
            cursor: pointer;
            margin-top: -6px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #D1D5DB;
            border-radius: 2px;
        }
    </style>
</head>
<body class="p-4 md:p-8 lg:p-12 min-h-screen">

    <!-- Header Section -->
    <header class="max-w-7xl mx-auto mb-10 border-b border-[#D6D1C4] pb-6">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
            <div>
                <h1 class="text-3xl font-bold tracking-tight text-[#2C3333]">Quantitative Valuation and Microstructure Analysis</h1>
                <p class="text-sm text-[#525E5E] mt-2 mono">Assets: MONAD (MON) vs. MEGAETH (MEGA)</p>
            </div>
            <div class="mt-4 md:mt-0 text-right">
                <div class="inline-block bg-[#EAE7DE] px-3 py-1 rounded text-xs font-semibold tracking-wide uppercase text-[#525E5E]">
                    Report Framework: Structural Competitive Modeling
                </div>
            </div>
        </div>
        
        <!-- I. Executive Summary: Asymmetric Risk and Statistical Positioning -->
        <div class="mt-6 max-w-4xl">
            <p class="text-[#2C3333] leading-relaxed">
                <span class="font-bold">I. Executive Summary:</span> The quantitative assessment of Monad (MON) and MegaETH (MEGA) valuation paths is anchored in the systematic modeling of structural competitive advantages and micro-temporal supply-demand dynamics. Unlike qualitative analyses based on narrative or whitepaper promises, this framework prioritizes measurable tokenomics, predictable behavioral patterns (airdrop liquidation), and verifiable network utility metrics (Total Value Locked and developer migration).
            </p>
            <p class="text-[#2C3333] leading-relaxed mt-3">
                <span class="font-bold">1.1. Core Findings Summary:</span> The analysis reveals two distinct initial valuation trajectories driven primarily by token distribution mechanisms. <strong>MON</strong>, the Layer 1 (L1) monolithic blockchain, is statistically positioned for immediate post-TGE price decay. This volatility is a consequence of a high initial circulating supply (approaching 49.4% of the total 100 billion tokens) combined with the instantaneous liquidation pressure generated by the 3.3% airdrop allocation. Consequently, MON is predicted to trade below its public sale anchor price of 0.025 USD in the immediate <span class="mono">&tau;<sub>1m</sub></span> window, presenting a predictable accumulation opportunity.
            </p>
            <p class="text-[#2C3333] leading-relaxed mt-3">
                <span class="font-bold">Asymmetric Potential:</span> <strong>MEGA</strong> is assigned the greater asymmetric potential. Its scarcity and the structural enforcement of token retention via KPI staking (53% locked) offer a significantly better hedge against initial market volatility (lower risk floor) while capturing the technical upside of high-throughput L2 scaling (higher reward ceiling in the <span class="mono">&tau;<sub>6m</sub></span> window).
            </p>
        </div>
    </header>

    <!-- Tokenomics & Controls Grid -->
    <section class="max-w-7xl mx-auto mb-8 grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- Tokenomics Card (New Addition for missed quantitative data) -->
        <div class="quant-card p-6 rounded-lg md:col-span-1">
            <h2 class="text-lg font-bold text-[#2C3333] mb-4">Tokenomics Microstructure</h2>
            <div class="space-y-3">
                <div class="flex justify-between items-center pb-2 border-b border-gray-100">
                    <span class="text-sm text-gray-600">MON Initial Circulating Supply (49.4% of 100B)</span>
                    <span class="text-xl font-bold mono text-red-600">49.4%</span>
                </div>
                <div class="flex justify-between items-center pb-2 border-b border-gray-100">
                    <span class="text-sm text-gray-600">MON Airdrop Liquidation Pressure</span>
                    <span class="text-xl font-bold mono text-red-500">3.3%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-600">MEGA KPI Staking Reserve (Structural Scarcity)</span>
                    <span class="text-xl font-bold mono text-[#2E8B57]">53%</span>
                </div>
            </div>
        </div>
        
        <!-- Controls (Time & Beta) -->
        <div class="quant-card p-6 rounded-lg md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6 items-center">
            <!-- Time Horizon Toggle -->
            <div>
                <label class="block text-xs font-bold uppercase tracking-wider text-gray-500 mb-3">Forecast Horizon (&tau;)</label>
                <div class="flex space-x-4">
                    <button id="btn-1m" class="flex-1 py-2 px-4 rounded border border-gray-300 bg-[#2C3333] text-white font-mono text-sm transition hover:opacity-90 active-btn">
                        &tau;<sub>1m</sub> (1 Month)
                    </button>
                    <button id="btn-6m" class="flex-1 py-2 px-4 rounded border border-gray-300 bg-white text-[#2C3333] font-mono text-sm transition hover:bg-gray-50">
                        &tau;<sub>6m</sub> (6 Months)
                    </button>
                </div>
            </div>

            <!-- Market Beta Slider (Simulates the market risk factor) -->
            <div>
                <div class="flex justify-between mb-2">
                    <label class="block text-xs font-bold uppercase tracking-wider text-gray-500">Market Risk Factor (&beta;)</label>
                    <span id="beta-val" class="mono text-xs font-bold text-[#2C3333]">Base (1.0)</span>
                </div>
                <input type="range" id="market-beta" min="0.5" max="1.5" step="0.1" value="1.0">
                <div class="flex justify-between mt-1 text-[10px] text-gray-400">
                    <span>Bearish (0.5)</span>
                    <span>Bullish (1.5)</span>
                </div>
            </div>
        </div>

    </section>

    <!-- Main Dashboard Grid -->
    <main class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- Column 1: Valuation Chart and Factors (8 cols) -->
        <div class="lg:col-span-8 space-y-8">
            
            <!-- III. Quantitative Projections: FDV Chart -->
            <div class="quant-card p-6 rounded-lg">
                <div class="mb-4 border-b border-gray-100 pb-2">
                    <h2 class="text-lg font-bold text-[#2C3333]">III. Quantitative Projections: Full Diluted Valuation (FDV)</h2>
                    <p class="text-xs text-gray-500 mt-1">
                        FDV projections based on comparative analysis against structural peers (Aptos, Sui, Sei) and adjustment for &beta;.
                    </p>
                </div>
                
                <div class="chart-wrapper">
                    <canvas id="valuationChart"></canvas>
                </div>

                <!-- Dynamic Insight Box (Reflecting Section I.1 and III.A/B) -->
                <div class="mt-4 bg-[#F9F8F6] p-4 border border-[#EAE7DE] rounded">
                    <h3 class="text-xs font-bold uppercase text-gray-500 mb-2">Microstructure Insight (&tau;<sub>1m</sub> vs &tau;<sub>6m</sub>):</h3>
                    <p id="chart-insight" class="text-sm text-[#2C3333] leading-relaxed mono">
                        Analyzing token distribution effects...
                    </p>
                </div>
            </div>

            <!-- II. Competitive Landscape and Factor Analysis (Radar Chart) -->
            <div class="quant-card p-6 rounded-lg">
                <div class="mb-2">
                    <h2 class="text-lg font-bold text-[#2C3333]">II. Competitive Landscape: Factor Analysis</h2>
                    <p class="text-xs text-gray-500">Multivariate comparison of key drivers extracted from Section II.</p>
                </div>
                <div class="chart-wrapper" style="height: 300px;">
                    <canvas id="radarChart"></canvas>
                </div>
                <div class="mt-2 text-xs text-gray-500 text-center">
                    <span style="color: #8850CA">● MONAD (L1 Monolithic)</span> &nbsp; <span style="color: #2E8B57">● MEGAETH (L2 Specialized)</span>
                </div>
            </div>

        </div>

        <!-- Column 2: Detailed Scenarios and Asymmetry (4 cols) -->
        <div class="lg:col-span-4 space-y-8">

            <!-- V. Conclusion on Asymmetry -->
            <div class="quant-card p-6 rounded-lg bg-[#2C3333] text-white">
                <h2 class="text-lg font-bold mb-2">V. Conclusion: Asymmetric Potential</h2>
                <p class="text-xs text-gray-400 mb-6">Assessing the Risk/Reward ratio for portfolio positioning (Section I.2).</p>

                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-[#D8B4FE]">Monad (MON) - Initial Volatility</span>
                            <span class="font-mono" id="monad-score">Wait...</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div id="monad-bar" class="bg-[#8850CA] h-2 rounded-full transition-all duration-1000" style="width: 0%"></div>
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-[#86EFAC]">MegaETH (MEGA) - Scarcity Enforced</span>
                            <span class="font-mono" id="mega-score">Wait...</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div id="mega-bar" class="bg-[#2E8B57] h-2 rounded-full transition-all duration-1000" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-600">
                    <p id="alpha-verdict" class="text-sm font-mono leading-relaxed text-gray-300">
                        Initial Verdict: MEGA is positioned for greater alpha potential due to structural advantages.
                    </p>
                </div>
            </div>
            
            <!-- IV. Detailed Scenarios Table -->
            <div class="quant-card p-6 rounded-lg">
                <h2 class="text-lg font-bold text-[#2C3333] mb-4">IV. Detailed Scenario Probability Matrix</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-[#F5F2EB] text-xs uppercase text-gray-600">
                            <tr>
                                <th class="px-4 py-3 rounded-l">Scenario</th>
                                <th class="px-4 py-3">Drivers (Tech, Liquidity, Incentives)</th>
                                <th class="px-4 py-3 text-right">MON Est. (FDV)</th>
                                <th class="px-4 py-3 rounded-r text-right">MEGA Est. (FDV)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100" id="scenario-table-body">
                            <!-- JS populates this -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

    </main>

    <!-- Footer -->
    <footer class="max-w-7xl mx-auto mt-12 py-6 border-t border-[#D6D1C4] text-center">
        <p class="text-xs text-gray-500">
            Based on "Quantitative Valuation and Microstructure Analysis of Monad (MON) and MegaETH (MEGA) Tokens" Report. <br>
            FDV is in Billions USD. Forecasts are subject to the Market Risk Factor (&beta;).
        </p>
    </footer>

    <!-- PYTHON CODE MODEL -->
    <section class="max-w-7xl mx-auto mt-12 pt-8 border-t border-[#D6D1C4]">
        <h2 class="text-xl font-bold text-[#2C3333] mb-4">Python Data Model for Quantitative Analysis</h2>
        <p class="text-sm text-gray-600 mb-4">
            The script below contains the core <code>TokenValuator</code> class, which defines the base data, beta sensitivity, and adjustment logic used in this analysis. You can copy and run this Python code locally.
        </p>
        
        <pre class="bg-[#2C3333] text-[#D8B4FE] p-4 rounded-lg overflow-x-auto text-xs mono">
import json
import pandas as pd
import numpy as np
import requests
from bs4 import BeautifulSoup
from scipy.stats import lognorm  # For MC sims

class TokenValuator:
    def __init__(self):
        # Updated base from research (Dec 2025: MON FDV~$3B, MEGA pre~$1B)
        self.base_data = {
            '1m': {
                'monad': {'conservative': 2.0, 'base': 3.5, 'aggressive': 5.0},
                'mega': {'conservative': 0.8, 'base': 2.5, 'aggressive': 4.0},
                'drivers': 'Tech (parallel EVM vs real-time L2), airdrop (3.3% dump vs KPI rewards), liquidity (49% float vs 5% ICO)'
            },
            '6m': {
                'monad': {'conservative': 4.0, 'base': 8.0, 'aggressive': 15.0},
                'mega': {'conservative': 2.0, 'base': 6.0, 'aggressive': 12.0},
                'drivers': 'Catalysts (Coinbase vs Sonar), incentives (1% inflation vs 53% locks), market risk (1.2x vs 0.9x beta)'
            }
        }
        self.supply = {'monad': 100e9, 'mega': 1e9}  # Total supply
        # Beta Sensitivity: How much more volatile an asset is compared to the macro market (beta)
        self.beta_sens = {'1m': {'monad': 1.2, 'mega': 0.9}, '6m': {'monad': 1.0, 'mega': 0.9}}
        
        # Volatility for Monte Carlo simulation (used in original report, here for completeness)
        self.vol = {'monad': 0.8, 'mega': 0.6}  

    def scrape_live_fdv(self, token_symbol):
        """
        Placeholder for scraping live FDV from CoinGecko/DefiLlama.
        In a real scenario, this would execute an API call.
        """
        if token_symbol == 'monad':
            return 3.2 # Mock live FDV (Billions USD)
        if token_symbol == 'mega':
            return 1.1 # Mock live FDV (Billions USD)
        return 0.0

    def apply_beta_adjust(self, horizon, market_beta):
        """
        Applies the market risk factor (beta) and asset-specific sensitivity to the base FDV.
        """
        data = self.base_data[horizon]
        sensitivity = self.beta_sens[horizon]
        
        adjusted_data = {'monad': {}, 'mega': {}}

        # Calculate the effective beta for each asset
        beta_mon = market_beta * sensitivity['monad']
        beta_mega = market_beta * sensitivity['mega']
        
        # Apply adjustment for Monad
        for scenario, fdv in data['monad'].items():
            adjusted_data['monad'][scenario] = round(fdv * beta_mon, 1)

        # Apply adjustment for MegaETH
        for scenario, fdv in data['mega'].items():
            adjusted_data['mega'][scenario] = round(fdv * beta_mega, 1)

        return adjusted_data

    def monte_carlo_upside_sim(self, horizon, n_sims=10000):
        """
        A Monte Carlo simulation stub to estimate the probability of 2x upside.
        Uses a Log-Normal distribution parameterized by base FDV (mu) and asset vol (sigma).
        """
        base_mon = self.base_data[horizon]['monad']['base']
        base_mega = self.base_data[horizon]['mega']['base']

        # Log-Normal parameters: mu is log(scale), sigma is shape (s)
        mu_mon, sigma_mon = np.log(base_mon), self.vol['monad']
        mu_mega, sigma_mega = np.log(base_mega), self.vol['mega']
        
        # Generate simulations
        sims_mon = lognorm.rvs(s=sigma_mon, scale=np.exp(mu_mon), size=n_sims)
        sims_mega = lognorm.rvs(s=sigma_mega, scale=np.exp(mu_mega), size=n_sims)

        # Calculate probability of doubling (2x) the base case FDV
        upside_mon = np.mean(sims_mon > 2 * base_mon) * 100
        upside_mega = np.mean(sims_mega > 2 * base_mega) * 100

        return {'monad_upside_pct': round(upside_mon, 1), 'mega_upside_pct': round(upside_mega, 1)}

# Usage: Instantiate, adjust, sim
if __name__ == "__main__":
    valuator = TokenValuator()
    
    # Example: Base-adjusted forecasts for 1-month and 6-month horizons
    adj_1m = valuator.apply_beta_adjust('1m', 1.0)
    adj_6m = valuator.apply_beta_adjust('6m', 1.2)  # Example Bullish Beta
    
    print("--- 1M Forecast (Beta=1.0) ---")
    print(json.dumps(adj_1m, indent=2))
    print("\n--- 6M Forecast (Beta=1.2) ---")
    print(json.dumps(adj_6m, indent=2))

    # Example: Monte Carlo Simulation (Upside Probability)
    mc_1m = valuator.monte_carlo_upside_sim('1m')
    print("\n--- 1M Monte Carlo Upside (2x Base) ---")
    print(json.dumps(mc_1m, indent=2))
</pre>
    </section>


    <script>
        // --- DATA & STATE MANAGEMENT (Directly derived from the Python TokenValuator class) ---
        
        const state = {
            horizon: '1m', // '1m' or '6m'
            beta: 1.0 // Market risk multiplier (1.0 = Base Case)
        };

        // Data directly ported from TokenValuator.base_data (FDV in Billions USD)
        const baseData = {
            '1m': {
                monad: { conservative: 2.0, base: 3.5, aggressive: 5.0 },
                mega:  { conservative: 0.8, base: 2.5, aggressive: 4.0 },
                
                // Textual data updated to reflect the new, more conservative FDV figures
                insight: "The new model adjusts MON's initial FDV to $3.5B (base), reflecting expected post-TGE decay from its high 49.4% float and 3.3% airdrop liquidation. MEGA's base FDV is $2.5B, supported by structural scarcity (53% KPI lock) and lower &beta; sensitivity.",
                
                table: [
                    { name: "Conservative", drivers: "Tech (parallel EVM vs real-time L2), airdrop (3.3% dump vs KPI rewards), liquidity (49% float vs 5% ICO).", mon: "$2.0B", mega: "$0.8B" },
                    { name: "Base Case", drivers: "Tech (parallel EVM vs real-time L2), airdrop (3.3% dump vs KPI rewards), liquidity (49% float vs 5% ICO).", mon: "$3.5B", mega: "$2.5B" },
                    { name: "Aggressive", drivers: "Tech (parallel EVM vs real-time L2), airdrop (3.3% dump vs KPI rewards), liquidity (49% float vs 5% ICO).", mon: "$5.0B", mega: "$4.0B" }
                ],
                
                // Asymmetry Score (Adjusted for the new lower base and the Python beta model)
                asymmetry: {
                    monad: 50, // Slightly better accumulation thesis
                    mega: 90,  // Still dominant alpha position
                    verdict: "Verdict: Based on the new base FDV figures (Dec 2025 research), MEGA holds the superior structural advantage due to token retention and lower &beta; sensitivity (0.9 vs 1.2 at &tau;<sub>1m</sub>)."
                }
            },
            '6m': {
                monad: { conservative: 4.0, base: 8.0, aggressive: 15.0 }, 
                mega:  { conservative: 2.0, base: 6.0, aggressive: 12.0 },
                
                insight: "At &tau;<sub>6m</sub>, MON's base projection is $8.0B, driven by successful parallel EVM execution. MEGA's base is $6.0B. Both rely on ecosystem growth, but MEGA's valuation is steadier due to a consistent &beta; sensitivity of 0.9.",
                
                table: [
                    { name: "Conservative", drivers: "Catalysts (Coinbase vs Sonar), incentives (1% inflation vs 53% locks), market risk (1.0x vs 0.9x &beta;).", mon: "$4.0B", mega: "$2.0B" },
                    { name: "Base Case", drivers: "Catalysts (Coinbase vs Sonar), incentives (1% inflation vs 53% locks), market risk (1.0x vs 0.9x &beta;).", mon: "$8.0B", mega: "$6.0B" },
                    { name: "Aggressive", drivers: "Catalysts (Coinbase vs Sonar), incentives (1% inflation vs 53% locks), market risk (1.0x vs 0.9x &beta;).", mon: "$15.0B", mega: "$12.0B" }
                ],
                
                // Asymmetry Score
                asymmetry: {
                    monad: 70, 
                    mega: 80,
                    verdict: "Verdict: Both assets show strong growth potential, but MEGA maintains a better structural risk-adjusted profile given its low supply volatility (consistent &beta;<sub>0.9</sub>)."
                }
            }
        };
        
        // Beta Sensitivity factors directly ported from TokenValuator.beta_sens
        const betaSens = {
            '1m': { monad: 1.2, mega: 0.9 },
            '6m': { monad: 1.0, mega: 0.9 }
        };

        // Factor Analysis Scores (Derived from Section II: Competitive Landscape)
        const factorData = {
            labels: ['Tokenomics Scarcity', 'Tech Execution (Tx/s)', 'Initial Liquidity', 'Developer Incentives', 'Network Composability'],
            monad: [50, 95, 90, 80, 75],
            mega: [90, 80, 70, 95, 90]
        };

        // --- DOM ELEMENTS ---
        const btn1m = document.getElementById('btn-1m');
        const btn6m = document.getElementById('btn-6m');
        const betaSlider = document.getElementById('market-beta');
        const betaDisplay = document.getElementById('beta-val');
        const chartInsight = document.getElementById('chart-insight');
        const tableBody = document.getElementById('scenario-table-body');
        const monadBar = document.getElementById('monad-bar');
        const megaBar = document.getElementById('mega-bar');
        const monadScore = document.getElementById('monad-score');
        const megaScore = document.getElementById('mega-score');
        const alphaVerdict = document.getElementById('alpha-verdict');

        // --- CHART INSTANCES ---
        let valuationChart = null;
        let radarChart = null;

        // --- INITIALIZATION ---
        function init() {
            initValuationChart();
            initRadarChart();
            updateUI();
            
            // Event Listeners
            btn1m.addEventListener('click', () => { 
                state.horizon = '1m'; 
                toggleActiveBtn(btn1m, btn6m); 
                updateUI(); 
            });
            btn6m.addEventListener('click', () => { 
                state.horizon = '6m'; 
                toggleActiveBtn(btn6m, btn1m); 
                updateUI(); 
            });
            betaSlider.addEventListener('input', (e) => {
                state.beta = parseFloat(e.target.value);
                
                // Update text label
                let betaText = "Base (1.0)";
                if(state.beta < 0.9) betaText = `Bearish (${state.beta})`;
                if(state.beta > 1.1) betaText = `Bullish (${state.beta})`;
                betaDisplay.innerText = betaText;

                updateUI();
            });
        }

        function toggleActiveBtn(active, inactive) {
            active.classList.add('bg-[#2C3333]', 'text-white');
            active.classList.remove('bg-white', 'text-[#2C3333]');
            inactive.classList.add('bg-white', 'text-[#2C3333]');
            inactive.classList.remove('bg-[#2C3333]', 'text-white');
        }

        // --- CHART LOGIC ---

        function initValuationChart() {
            const ctx = document.getElementById('valuationChart').getContext('2d');
            
            valuationChart = new Chart(ctx, {
                type: 'bar', 
                data: {
                    labels: ['Conservative', 'Base Case', 'Aggressive'],
                    datasets: [
                        {
                            label: 'Monad (FDV $B)',
                            data: [0, 0, 0],
                            backgroundColor: 'rgba(136, 80, 202, 0.7)',
                            borderColor: '#8850CA',
                            borderWidth: 1
                        },
                        {
                            label: 'MegaETH (FDV $B)',
                            data: [0, 0, 0],
                            backgroundColor: 'rgba(46, 139, 87, 0.7)',
                            borderColor: '#2E8B57',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': $' + context.raw.toFixed(1) + 'B';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Valuation (FDV in Billions USD)' },
                            grid: { color: '#E0DCD3' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function initRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: factorData.labels,
                    datasets: [{
                        label: 'MONAD',
                        data: factorData.monad,
                        fill: true,
                        backgroundColor: 'rgba(136, 80, 202, 0.2)',
                        borderColor: '#8850CA',
                        pointBackgroundColor: '#8850CA'
                    }, {
                        label: 'MEGAETH',
                        data: factorData.mega,
                        fill: true,
                        backgroundColor: 'rgba(46, 139, 87, 0.2)',
                        borderColor: '#2E8B57',
                        pointBackgroundColor: '#2E8B57'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#E0DCD3' },
                            grid: { color: '#E0DCD3' },
                            pointLabels: {
                                font: { size: 10, family: 'Inter' },
                                color: '#525E5E'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        }

        // --- UTILITY: Replaces LaTeX sequences with HTML/Unicode for display ---
        function formatText(text) {
            let formattedText = text;
            formattedText = formattedText.replace(/\\tau_{1m}/g, '&tau;<sub>1m</sub>');
            formattedText = formattedText.replace(/\\tau_{6m}/g, '&tau;<sub>6m</sub>');
            formattedText = formattedText.replace(/\\beta/g, '&beta;');
            formattedText = formattedText.replace(/\\approx/g, '≈');
            // Ensure no stray dollars signs from LaTeX display are left
            formattedText = formattedText.replace(/\$/g, ''); 
            return formattedText;
        }

        // --- UI UPDATE LOGIC ---

        function updateUI() {
            const data = baseData[state.horizon];
            
            // 1. Update Chart Data with Beta Multiplier (Using Python model's sensitivity)
            const m = data.monad;
            const eth = data.mega;
            
            // Beta sensitivity factors from Python's TokenValuator.beta_sens
            const betaMon = state.beta * betaSens[state.horizon].monad; 
            const betaMega = state.beta * betaSens[state.horizon].mega;

            const monadVals = [m.conservative * betaMon, m.base * betaMon, m.aggressive * betaMon];
            const megaVals = [eth.conservative * betaMega, eth.base * betaMega, eth.aggressive * betaMega];

            valuationChart.data.datasets[0].data = monadVals;
            valuationChart.data.datasets[1].data = megaVals;
            valuationChart.update();

            // 2. Update Text Insights
            chartInsight.innerHTML = formatText(data.insight);
            
            // 3. Update Table
            tableBody.innerHTML = "";
            data.table.forEach((row) => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-gray-50 border-b border-gray-50 last:border-0";
                
                // Use the same Beta factors applied to the chart for consistency in the table display
                const monVal = (parseFloat(row.mon.replace('$','').replace('B','')) * betaMon).toFixed(1);
                const megaVal = (parseFloat(row.mega.replace('$','').replace('B','')) * betaMega).toFixed(1);

                tr.innerHTML = `
                    <td class="px-4 py-3 font-semibold text-[#2C3333]">${row.name}</td>
                    <td class="px-4 py-3 text-gray-500 text-xs">${formatText(row.drivers)}</td>
                    <td class="px-4 py-3 text-right mono font-bold text-[#8850CA]">$${monVal}B</td>
                    <td class="px-4 py-3 text-right mono font-bold text-[#2E8B57]">$${megaVal}B</td>
                `;
                tableBody.appendChild(tr);
            });

            // 4. Update Asymmetry Engine
            let monScoreVal = data.asymmetry.monad;
            let megaScoreVal = data.asymmetry.mega;

            // Simple interactive adjustment logic based on the report's inherent risk assumptions
            // Note: This block is interactive and not directly from the Python model, but uses its data.
            if(state.beta > 1.2) { 
                // Market is very bullish, riskier MON benefits more.
                monScoreVal += 10; 
                megaScoreVal += 5; 
            }
            if(state.beta < 0.8) { 
                // Market is very bearish, MEGA's structural protection is favored.
                monScoreVal -= 15; 
                megaScoreVal -= 5; 
            }

            // Clamp scores between 0 and 100
            monScoreVal = Math.min(100, Math.max(0, monScoreVal));
            megaScoreVal = Math.min(100, Math.max(0, megaScoreVal));

            monadBar.style.width = `${monScoreVal}%`;
            monadScore.innerText = `${monScoreVal}/100`;
            
            megaBar.style.width = `${megaScoreVal}%`;
            megaScore.innerText = `${megaScoreVal}/100`;

            alphaVerdict.innerHTML = `<span class="text-white font-bold">> VERDICT:</span> ${formatText(data.asymmetry.verdict)}`;
        }

        // Run Init
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>